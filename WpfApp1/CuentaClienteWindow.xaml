<Window x:Class="WpfApp1.CuentaClienteWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:fa="clr-namespace:FontAwesome.WPF;assembly=FontAwesome.WPF"
        xmlns:local="clr-namespace:WpfApp1"
        Title="Cuenta Cliente" Height="550" Width="983" Background="#f0f2f5" WindowStartupLocation="CenterScreen">

    <!-- Recursos -->
    <Window.Resources>
        <local:NegativoARojoConverter x:Key="NegativoARojo"/>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Título -->
            <RowDefinition Height="Auto"/>
            <!-- Formulario pago/exportar -->
            <RowDefinition Height="*"/>
            <!-- DataGrid + Modificar -->
        </Grid.RowDefinitions>

        <!-- Título -->
        <TextBlock x:Name="txtTitulo" Grid.Row="0" FontSize="24" FontWeight="Bold" Foreground="#333" Margin="0 0 0 20" TextAlignment="Center"/>

        <!-- Formulario pago/exportar -->
        <Border Grid.Row="1" Background="White" Padding="10" CornerRadius="10" Margin="0,0,0,20" BorderBrush="#DDD" BorderThickness="1">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center" Width="923">
                <StackPanel Margin="10">
                    <TextBlock Text="FECHA" FontWeight="Bold" Margin="0 0 0 5" FontSize="16"/>
                    <TextBox Name="txtFecha" Width="150" IsReadOnly="True" Background="#eee" BorderBrush="#CCC" FontSize="16"/>
                </StackPanel>
                <StackPanel Margin="10">
                    <TextBlock Text="DETALLE" FontWeight="Bold" Margin="0 0 0 5" FontSize="16"/>
                    <TextBox Name="txtDetalle" Width="250" BorderBrush="#CCC" FontSize="16"/>
                </StackPanel>
                <StackPanel Margin="10">
                    <TextBlock Text="MONTO" FontWeight="Bold" Margin="0 0 0 5" FontSize="16"/>
                    <TextBox Name="txtMonto" Width="120" BorderBrush="#CCC" PreviewTextInput="txtMonto_PreviewTextInput" TextChanged="txtMonto_TextChanged" FontSize="16"/>
                </StackPanel>
                <Button Margin="10 25" Width="180" Height="36" Background="CadetBlue" Foreground="White" BorderBrush="#1f7a30" FontWeight="Bold" FontSize="16" Cursor="Hand" Click="BtnRegistrarPago_Click">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <fa:ImageAwesome Icon="Check" Width="20" Height="20" Foreground="White" Margin="0,0,6,0"/>
                        <TextBlock Text="REGISTRAR PAGO" VerticalAlignment="Center" FontSize="16"/>
                    </StackPanel>
                    <Button.Effect>
                        <DropShadowEffect Color="#888" ShadowDepth="2" BlurRadius="4"/>
                    </Button.Effect>
                </Button>
                <Button Margin="10 25" Width="120" Height="36" Background="DarkBlue" Foreground="White" BorderBrush="#1f7a30" FontWeight="Bold" FontSize="16" Cursor="Hand" Click="BtnExportarExcel_Click" ToolTip="Exportar">
                    <StackPanel Orientation="Horizontal">
                        <fa:ImageAwesome Icon="Download" Width="20" Height="20" Foreground="White"/>
                        <TextBlock Text="EXPORTAR" Margin="5,0,0,0"/>
                    </StackPanel>
                    <Button.Effect>
                        <DropShadowEffect Color="#888" ShadowDepth="2" BlurRadius="4"/>
                    </Button.Effect>
                </Button>
            </StackPanel>
        </Border>

        <!-- DataGrid + botón Modificar -->
        <Grid Grid.Row="2" Background="White">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <!-- DataGrid ocupa la mayor parte -->
                <ColumnDefinition Width="Auto"/>
                <!-- Botón Modificar más pequeño -->
            </Grid.ColumnDefinitions>

            <!-- DataGrid -->
            <DataGrid x:Name="dgCuenta" Grid.Column="0"
              AutoGenerateColumns="False" CanUserAddRows="False" 
              AlternatingRowBackground="#f9f9f9" RowBackground="White" 
              HeadersVisibility="Column" GridLinesVisibility="None" 
              BorderThickness="0" ColumnHeaderHeight="35" FontSize="14"
              MinWidth="700">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Fecha" Binding="{Binding Fecha}" Width="*" />
                    <DataGridTextColumn Header="Detalle" Binding="{Binding Detalle}" Width="2*" />
                    <DataGridTextColumn Header="Debe" Binding="{Binding Debe}" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Foreground" Value="{Binding Debe, Converter={StaticResource NegativoARojo}}"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Haber" Binding="{Binding Haber}" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Foreground" Value="{Binding Haber, Converter={StaticResource NegativoARojo}}"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Saldo" Binding="{Binding Saldo}" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Foreground" Value="{Binding Saldo, Converter={StaticResource NegativoARojo}}"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="ID" Binding="{Binding movimientoID}" Visibility="Collapsed"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- Botón Modificar más pequeño -->
            <Button Grid.Column="1" Width="100" Height="32" Margin="10" Background="DarkOrange" Foreground="White" FontWeight="Bold" Cursor="Hand" Click="BtnModificar_Click">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <fa:ImageAwesome Icon="Edit" Width="16" Height="16" Foreground="White" Margin="0,0,4,0"/>
                    <TextBlock Text="MODIFICAR" VerticalAlignment="Center" FontSize="12"/>
                </StackPanel>
                <Button.Effect>
                    <DropShadowEffect Color="#888" ShadowDepth="2" BlurRadius="4"/>
                </Button.Effect>
            </Button>
        </Grid>

    </Grid>
</Window>
